<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no">
    <title>Data Entry</title>
    <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.3/dist/css/bootstrap.min.css" rel="stylesheet">
    <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/bootstrap-icons@1.11.3/font/bootstrap-icons.min.css">
    <link rel="stylesheet" href="style.css">
    <script src="https://cdn.sheetjs.com/xlsx-latest/package/dist/xlsx.full.min.js"></script>
</head>
<body class="app-body">
    
    <nav class="navbar navbar-dark bg-primary fixed-top shadow-sm">
        <div class="container-fluid">
            <div class="d-flex align-items-center gap-3">
                <button class="btn btn-link text-white p-0" type="button" data-bs-toggle="offcanvas" data-bs-target="#sideMenu">
                    <i class="bi bi-list fs-1"></i>
                </button>
                <span class="navbar-brand mb-0 h1" id="page-title">New Record</span>
            </div>
            <button type="button" class="btn text-white" onclick="saveRecord()">
                <i class="bi bi-check-lg fs-2"></i>
            </button>
        </div>
    </nav>

    <div class="offcanvas offcanvas-start" tabindex="-1" id="sideMenu">
        <div class="offcanvas-header">
            <h5 class="offcanvas-title">Menu</h5>
            <button type="button" class="btn-close btn-close-white" data-bs-dismiss="offcanvas"></button>
        </div>
        <div class="offcanvas-body p-0">
            <div class="list-group list-group-flush">
                <a href="index.html" class="list-group-item list-group-item-action">
                    <i class="bi bi-arrow-left me-2"></i> Back to List
                </a>
                <a href="#" onclick="printList()" class="list-group-item list-group-item-action">
                    <i class="bi bi-printer me-2"></i> Print PDF
                </a>
                <a href="#" onclick="exportRecordToExcel()" class="list-group-item list-group-item-action">
                    <i class="bi bi-file-earmark-spreadsheet me-2"></i> Export Excel
                </a>
                 <button type="button" id="delete-btn" class="list-group-item list-group-item-action text-danger d-none">
                    <i class="bi bi-trash me-2"></i> Delete Record
                </button>
                <a href="#" onclick="logoutUser()" class="list-group-item list-group-item-action text-secondary">
                    <i class="bi bi-box-arrow-right me-2"></i> Logout
                </a>
            </div>
        </div>
        <div class="p-3 text-center text-muted small bg-light">
            Software By <a href="https://www.dhartee.in">DharTee</a>
        </div>
    </div>

    <div class="main-content-wrapper">
      <form id="entry-form">
    <div class="card shadow-sm mb-1 border-0 rounded-4">
        <div class="card-body p-2 bg-white">
            <div class="row g-2">
                
                <div class="col-12">
                    <div class="form-floating">
                        <input type="text" class="form-control fw-bold fs-6" 
                               style="height: 3rem; min-height: 3rem;" 
                               id="partyName" list="party-names-list" placeholder="Supplier" required>
                        <label style="padding-top: 0.4rem;">Supplier Name</label>
                    </div>
                    <datalist id="party-names-list"></datalist>
                </div>

                <div class="col-12">
                    <div class="form-floating">
                        <input type="text" class="form-control fs-6" 
                               style="height: 3rem; min-height: 3rem;" 
                               id="entryNote" placeholder="Note">
                        <label style="padding-top: 0.4rem;">Note / Remarks</label>
                    </div>
                </div>

                <div class="col-7">
                    <div class="form-floating">
                        <input type="date" class="form-control fs-6" 
                               style="height: 3rem; min-height: 3rem;" 
                               id="entryDate" required>
                        <label style="padding-top: 0.4rem;">Date</label>
                    </div>
                </div>

                <div class="col-5">
                    <div class="form-floating">
                        <input type="text" class="form-control text-center bg-light fs-6" 
                               style="height: 3rem; min-height: 3rem;" 
                               id="recordNumber" placeholder="#" readonly disabled>
                        <label style="padding-top: 0.4rem;">Rec No.</label>
                    </div>
                </div>
              
            </div>
        </div>
    </div>
</form>

        <div class="slider-wrapper">
            <div id="slider-container" class="slider-container">
                </div>
        </div>
    </div>

    <div class="virtual-keypad-container">
        <div class="keypad-totals">
            <div>PCS: <strong id="total-pcs">0</strong></div>
            <div>CFT: <strong id="total-cft" class="text-primary">0.00</strong></div>
            <div>CBM: <strong id="total-cbm">0.00</strong></div>
        </div>

        <div class="keypad-grid">
            <button class="key-btn" onclick="kp('1')">1</button>
            <button class="key-btn" onclick="kp('2')">2</button>
            <button class="key-btn" onclick="kp('3')">3</button>
            <button class="key-btn key-nav" onclick="manualPrevLog()"><i class="bi bi-chevron-left"></i></button>

            <button class="key-btn" onclick="kp('4')">4</button>
            <button class="key-btn" onclick="kp('5')">5</button>
            <button class="key-btn" onclick="kp('6')">6</button>
            <button class="key-btn key-nav" onclick="manualNextLog()"><i class="bi bi-chevron-right"></i></button>

            <button class="key-btn" onclick="kp('7')">7</button>
            <button class="key-btn" onclick="kp('8')">8</button>
            <button class="key-btn" onclick="kp('9')">9</button>
            <button class="key-btn key-next" onclick="kpNext()">NEXT</button>

            <button class="key-btn" onclick="kp('.')">.</button>
            <button class="key-btn" onclick="kp('0')">0</button>
            <button class="key-btn key-backspace" onclick="kpBack()"><i class="bi bi-backspace"></i></button>
            </div>
    </div>

    <div class="modal fade" id="successModal" tabindex="-1">
        <div class="modal-dialog modal-dialog-centered modal-sm">
            <div class="modal-content text-center p-3">
                <div class="mb-2 text-success"><i class="bi bi-check-circle-fill fs-1"></i></div>
                <h5 class="mb-0">Saved!</h5>
            </div>
        </div>
    </div>
    
    <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.3/dist/js/bootstrap.bundle.min.js"></script>
    
    <script src="https://www.gstatic.com/firebasejs/8.10.1/firebase-app.js"></script>
    <script src="https://www.gstatic.com/firebasejs/8.10.1/firebase-auth.js"></script>
    <script src="https://www.gstatic.com/firebasejs/8.10.1/firebase-firestore.js"></script>
    
    <script src="https://unpkg.com/jspdf@latest/dist/jspdf.umd.min.js"></script>
    <script src="https://unpkg.com/jspdf-autotable@3.5.23/dist/jspdf.plugin.autotable.js"></script>
    
    <script src="config.js"></script>
    <script src="app.js"></script>
    <script> initializeEntryPage(); </script>
</body>
</html>
